(()=>{var L=Object.defineProperty,O=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var C=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,c=(e,t)=>{for(var o in t||(t={}))w.call(t,o)&&C(e,o,t[o]);if(g)for(var o of g(t))B.call(t,o)&&C(e,o,t[o]);return e},d=(e,t)=>O(e,A(t));var M=(e,t,o)=>{if(!t.has(e))throw TypeError("Cannot "+o)};var f=(e,t,o)=>(M(e,t,"read from private field"),o?o.call(e):t.get(e)),T=(e,t,o)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,o)};var h="_context",R=!!globalThis.ssr,F=(e,t)=>{var o;return e.parentNode&&t?((o=e.parentNode)==null||o.replaceChild(t,e),t):(console.warn("could not update",e,e.parentNode,t),e)};function p(e){if(R)return()=>{};let t=p.caller.caller[h];if(t===void 0)throw new Error("Hooks needs a bound context");if(t.hookCount<(t.hooks||[]).length)return t.hooks[t.hookCount++]();let o=e(t);return t.hookCount=t.hooks.push(o),o()}function k(e,t){let o,n={props:t,element:o,hooks:[],render:()=>{o=F(o,i())}};e[h]=n;let i=()=>(n.hookCount=0,e(t));return o=i()}function b(e){let t=e,o=[],n=s=>{o.forEach(u=>{if(u!==void 0)try{u(s)}catch(a){console.error(a)}})};return()=>({data:c({},t),set:s=>{t=s,n(t)},listen:s=>{o.push(s)}})}function l(e){return p(t=>{let{listen:o}=e();return o(()=>{t.render()}),e})}function m(e){return e.reduce((t,o)=>Array.isArray(o)?t.concat(m(o)):t.concat(o),[])}var j="Fragment";function r(e,t,...o){if(globalThis.ssr!==void 0&&globalThis.ssr(e,t,o),typeof e=="function")return k(e,d(c({},t),{children:o}));if(e===j)return o;let n=document.createElement(e);if(t){Object.assign(n,t);for(let[s,u]of Object.entries(t))s.startsWith("on")?n.addEventListener(s.substring(2).toLowerCase(),u,!1):s==="dangerouslySetInnerHTML"?n.innerHTML=u.__html||"":s==="style"&&typeof t.style!="string"?Object.entries(t.style).forEach(([a,N])=>{n.style[a]=N}):u===!1||n.setAttribute(s,u)}let i=m(o).filter(s=>s instanceof HTMLElement||typeof s!="object"&&s!=null&&s!==!1);return n.append(...i),n}function v(e,t,o){var n,i;customElements.define(e,(i=class extends HTMLElement{constructor(){super();T(this,n,this.attachShadow({mode:"closed"}))}getProperties(){return this.getAttributeNames().reduce((u,a)=>d(c({},u),{[a]:this.getAttribute(a)}),c({},this.dataset))}connectedCallback(){let u=this.getProperties(),a=o;typeof o=="function"?a=r(o,u):typeof o=="string"&&(a=document.createElement("style"),a.innerHTML=o),a!==void 0&&f(this,n).append(a),f(this,n).append(r(t,u))}},n=new WeakMap,i))}function E(e,t){e.innerHTML="",e.append(t)}var P=(e,t)=>JSON.stringify(e)==JSON.stringify(t);function H(e,t){return p(o=>{let n;return()=>{P(t,n)||(e(),n=t)}})}function y(e){return p(t=>{let o=e,n=i=>{o!==i&&(o=i,t.render())};return()=>[o,n,e]})}var _=()=>{let[e,t]=y("hej"),[o,n]=y(0),i=s=>{t(s.target.value),n(o+1)};return H(()=>{console.log("first load only")},[]),r("div",null,r("input",{value:e,onChange:i})," data in input ",e," ",o)},x=b({contextProperty:"fanta"}),D=()=>{let{data:{contextProperty:e}}=l(x);return r("span",null,"Context data: ",e)},I=({text:e})=>{let{set:t}=l(x);return r("button",{onClick:()=>t({contextProperty:Math.random()*1e3})},e)},J=({text:e})=>{let{data:t}=l(x);return r("div",null,"custom element generator with prop ",e,", from context ",JSON.stringify(t))};v("slask-elm",J,r("style",null,`
					* {
							background-color:blue;
							padding:1rem;
							color:#fff;
					}
			`));var S=document.getElementById("app");S&&E(S,r("div",null,r("div",null,r("p",null,"Custom elements with bound context"),r("slask-elm",{text:"text from property"})),r("div",null,r("p",null,"Regular context consumer"),r(D,null)),r("div",null,r("p",null,"State hooks"),r(_,null)),r("div",null,r("p",null,"Context updater"),r(I,{text:"change context value"}))));})();
